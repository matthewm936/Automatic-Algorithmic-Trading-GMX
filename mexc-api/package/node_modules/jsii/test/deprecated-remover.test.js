"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const fs = require("fs-extra");
const os = require("os");
const path = require("path");
const lib_1 = require("../lib");
const DEPRECATED = '/** @deprecated stripped */';
test('produces correct output', async () => {
    const result = await lib_1.compileJsiiForTest(MULTI_FILE_EXAMPLE, undefined /* callback */, { stripDeprecated: true });
    expect(result.assembly.types).toMatchInlineSnapshot(`
    Object {
      "testpkg.GrandChild": Object {
        "assembly": "testpkg",
        "base": "testpkg.Retained",
        "fqn": "testpkg.GrandChild",
        "initializer": Object {},
        "interfaces": Array [
          "testpkg.IRetainedInterface",
        ],
        "kind": "class",
        "locationInModule": Object {
          "filename": "mixed.ts",
          "line": 11,
        },
        "methods": Array [
          Object {
            "locationInModule": Object {
              "filename": "mixed.ts",
              "line": 12,
            },
            "name": "retainedMethod",
          },
        ],
        "name": "GrandChild",
        "symbolId": "mixed:GrandChild",
      },
      "testpkg.IRetainedInterface": Object {
        "assembly": "testpkg",
        "fqn": "testpkg.IRetainedInterface",
        "kind": "interface",
        "locationInModule": Object {
          "filename": "retained.ts",
          "line": 2,
        },
        "name": "IRetainedInterface",
        "symbolId": "retained:IRetainedInterface",
      },
      "testpkg.Retained": Object {
        "abstract": true,
        "assembly": "testpkg",
        "fqn": "testpkg.Retained",
        "initializer": Object {},
        "kind": "class",
        "locationInModule": Object {
          "filename": "mixed.ts",
          "line": 4,
        },
        "name": "Retained",
        "properties": Array [
          Object {
            "immutable": true,
            "locationInModule": Object {
              "filename": "mixed.ts",
              "line": 7,
            },
            "name": "retained",
            "type": Object {
              "primitive": "string",
            },
          },
        ],
        "symbolId": "mixed:Retained",
      },
      "testpkg.RetainedClass": Object {
        "assembly": "testpkg",
        "fqn": "testpkg.RetainedClass",
        "initializer": Object {},
        "kind": "class",
        "locationInModule": Object {
          "filename": "retained.ts",
          "line": 3,
        },
        "name": "RetainedClass",
        "symbolId": "retained:RetainedClass",
      },
      "testpkg.SomeEnum": Object {
        "assembly": "testpkg",
        "fqn": "testpkg.SomeEnum",
        "kind": "enum",
        "locationInModule": Object {
          "filename": "enums.ts",
          "line": 2,
        },
        "members": Array [
          Object {
            "name": "VALUE_RETAINED",
          },
        ],
        "name": "SomeEnum",
        "symbolId": "enums:SomeEnum",
      },
    }
  `);
    expect(declFilesSnapshot(result)).toMatchInlineSnapshot(`
    "//////////////////
    /// index.d.ts ///
    import './deprecated';
    export * from './retained';
    export * from './enums';
    export { GrandChild, Retained } from './mixed';
    //////////////////


    ///////////////////////
    /// deprecated.d.ts ///
    ///////////////////////


    /////////////////////
    /// retained.d.ts ///
    export interface IRetainedInterface {
    }
    export declare class RetainedClass {
    }
    /////////////////////


    //////////////////
    /// enums.d.ts ///
    export declare enum SomeEnum {
        VALUE_RETAINED = 0
    }
    //////////////////


    //////////////////
    /// mixed.d.ts ///
    import * as retained_1 from \\"./retained\\";
    import { IRetainedInterface } from './retained';
    export declare abstract class Retained {
        readonly retained = \\"YEAH\\";
    }
    export declare class GrandChild extends Retained implements retained_1.IRetainedInterface {
        retainedMethod(): void;
    }
    //////////////////
    "
  `);
});
test('cross-file deprecated heritage', async () => {
    const result = await lib_1.compileJsiiForTest({
        'index.ts': `
        import { IDeprecated } from './deprecated';
        export * from './deprecated';
        export interface INotDeprecated extends IDeprecated {}
      `,
        'deprecated.ts': `
        ${DEPRECATED}
        export interface IDeprecated {}
      `,
    }, undefined /* callback */, { stripDeprecated: true });
    expect(declFilesSnapshot(result)).toMatchInlineSnapshot(`
    "//////////////////
    /// index.d.ts ///
    import './deprecated';
    import './deprecated';
    export interface INotDeprecated {
    }
    //////////////////


    ///////////////////////
    /// deprecated.d.ts ///
    ///////////////////////
    "
  `);
});
describe('stripDeprecatedAllowList', () => {
    test('strips all if all FQNs are present in the allowList', async () => {
        const tmpDir = await fs.mkdtemp(path.join(os.tmpdir(), 'jsiideprecatedremover'));
        const stripDeprecatedAllowListFile = path.join(tmpDir, 'allowList');
        await fs.writeFile(stripDeprecatedAllowListFile, [
            'testpkg.IDeprecatedInterface',
            'testpkg.DeprecatedClass',
            'testpkg.SomeEnum#VALUE_DEPRECATED',
            'testpkg.DeprecatedEnum',
            'testpkg.Retained#deprecated',
            'testpkg.Deprecated',
            'testpkg.GrandChild#deprecatedMethod',
        ].join('\n'), 'utf8');
        const resultWithoutAllowList = await lib_1.compileJsiiForTest(MULTI_FILE_EXAMPLE, undefined /* callback */, { stripDeprecated: true });
        const resultWithAllowList = await lib_1.compileJsiiForTest(MULTI_FILE_EXAMPLE, undefined /* callback */, { stripDeprecated: true, stripDeprecatedAllowListFile });
        expect(resultWithAllowList.assembly.types).toEqual(resultWithoutAllowList.assembly.types);
        expect(declFilesSnapshot(resultWithAllowList)).toEqual(declFilesSnapshot(resultWithoutAllowList));
    });
    test('strips none if the allowList is empty', async () => {
        const tmpDir = await fs.mkdtemp(path.join(os.tmpdir(), 'jsiideprecatedremover'));
        const stripDeprecatedAllowListFile = path.join(tmpDir, 'allowList');
        // Valid but empty file
        await fs.writeFile(stripDeprecatedAllowListFile, '', 'utf8');
        const resultNoStrip = await lib_1.compileJsiiForTest(MULTI_FILE_EXAMPLE, undefined /* callback */, { stripDeprecated: false });
        const resultStripEmpty = await lib_1.compileJsiiForTest(MULTI_FILE_EXAMPLE, undefined /* callback */, { stripDeprecated: true, stripDeprecatedAllowListFile });
        expect(resultStripEmpty.assembly.types).toEqual(resultNoStrip.assembly.types);
        expect(declFilesSnapshot(resultStripEmpty)).toEqual(declFilesSnapshot(resultNoStrip));
    });
    test('strips only allowlisted items if subset is present', async () => {
        const tmpDir = await fs.mkdtemp(path.join(os.tmpdir(), 'jsiideprecatedremover'));
        const stripDeprecatedAllowListFile = path.join(tmpDir, 'allowList');
        await fs.writeFile(stripDeprecatedAllowListFile, [
            'testpkg.IDeprecatedInterface',
            'testpkg.SomeEnum#VALUE_DEPRECATED',
            'testpkg.GrandChild#deprecatedMethod',
        ].join('\n'), 'utf8');
        const result = await lib_1.compileJsiiForTest(MULTI_FILE_EXAMPLE, undefined /* callback */, { stripDeprecated: true, stripDeprecatedAllowListFile });
        expect(result.assembly.types).toMatchInlineSnapshot(`
    Object {
      "testpkg.Deprecated": Object {
        "assembly": "testpkg",
        "base": "testpkg.Retained",
        "docs": Object {
          "deprecated": "stripped",
          "stability": "deprecated",
        },
        "fqn": "testpkg.Deprecated",
        "initializer": Object {},
        "interfaces": Array [
          "testpkg.IRetainedInterface",
        ],
        "kind": "class",
        "locationInModule": Object {
          "filename": "mixed.ts",
          "line": 10,
        },
        "name": "Deprecated",
        "symbolId": "mixed:Deprecated",
      },
      "testpkg.DeprecatedClass": Object {
        "assembly": "testpkg",
        "docs": Object {
          "deprecated": "stripped",
          "stability": "deprecated",
        },
        "fqn": "testpkg.DeprecatedClass",
        "initializer": Object {},
        "kind": "class",
        "locationInModule": Object {
          "filename": "deprecated.ts",
          "line": 5,
        },
        "name": "DeprecatedClass",
        "symbolId": "deprecated:DeprecatedClass",
      },
      "testpkg.DeprecatedEnum": Object {
        "assembly": "testpkg",
        "docs": Object {
          "deprecated": "stripped",
          "stability": "deprecated",
        },
        "fqn": "testpkg.DeprecatedEnum",
        "kind": "enum",
        "locationInModule": Object {
          "filename": "enums.ts",
          "line": 8,
        },
        "members": Array [
          Object {
            "docs": Object {
              "stability": "deprecated",
            },
            "name": "VALUE_ONE",
          },
          Object {
            "docs": Object {
              "stability": "deprecated",
            },
            "name": "VALUE_TWO",
          },
        ],
        "name": "DeprecatedEnum",
        "symbolId": "enums:DeprecatedEnum",
      },
      "testpkg.GrandChild": Object {
        "assembly": "testpkg",
        "base": "testpkg.Deprecated",
        "fqn": "testpkg.GrandChild",
        "initializer": Object {},
        "kind": "class",
        "locationInModule": Object {
          "filename": "mixed.ts",
          "line": 11,
        },
        "methods": Array [
          Object {
            "locationInModule": Object {
              "filename": "mixed.ts",
              "line": 12,
            },
            "name": "retainedMethod",
          },
        ],
        "name": "GrandChild",
        "symbolId": "mixed:GrandChild",
      },
      "testpkg.IRetainedInterface": Object {
        "assembly": "testpkg",
        "fqn": "testpkg.IRetainedInterface",
        "kind": "interface",
        "locationInModule": Object {
          "filename": "retained.ts",
          "line": 2,
        },
        "name": "IRetainedInterface",
        "symbolId": "retained:IRetainedInterface",
      },
      "testpkg.Retained": Object {
        "abstract": true,
        "assembly": "testpkg",
        "fqn": "testpkg.Retained",
        "initializer": Object {},
        "kind": "class",
        "locationInModule": Object {
          "filename": "mixed.ts",
          "line": 4,
        },
        "name": "Retained",
        "properties": Array [
          Object {
            "docs": Object {
              "deprecated": "stripped",
              "stability": "deprecated",
            },
            "immutable": true,
            "locationInModule": Object {
              "filename": "mixed.ts",
              "line": 6,
            },
            "name": "deprecated",
            "type": Object {
              "primitive": "number",
            },
          },
          Object {
            "immutable": true,
            "locationInModule": Object {
              "filename": "mixed.ts",
              "line": 7,
            },
            "name": "retained",
            "type": Object {
              "primitive": "string",
            },
          },
        ],
        "symbolId": "mixed:Retained",
      },
      "testpkg.RetainedClass": Object {
        "assembly": "testpkg",
        "fqn": "testpkg.RetainedClass",
        "initializer": Object {},
        "kind": "class",
        "locationInModule": Object {
          "filename": "retained.ts",
          "line": 3,
        },
        "name": "RetainedClass",
        "symbolId": "retained:RetainedClass",
      },
      "testpkg.SomeEnum": Object {
        "assembly": "testpkg",
        "fqn": "testpkg.SomeEnum",
        "kind": "enum",
        "locationInModule": Object {
          "filename": "enums.ts",
          "line": 2,
        },
        "members": Array [
          Object {
            "name": "VALUE_RETAINED",
          },
        ],
        "name": "SomeEnum",
        "symbolId": "enums:SomeEnum",
      },
    }
  `);
        expect(declFilesSnapshot(result)).toMatchInlineSnapshot(`
    "//////////////////
    /// index.d.ts ///
    export * from './deprecated';
    export * from './retained';
    export * from './enums';
    export { Deprecated, GrandChild, Retained } from './mixed';
    //////////////////


    ///////////////////////
    /// deprecated.d.ts ///
    /**
     * @deprecated stripped
     */
    export declare class DeprecatedClass {
    }
    ///////////////////////


    /////////////////////
    /// retained.d.ts ///
    export interface IRetainedInterface {
    }
    export declare class RetainedClass {
    }
    /////////////////////


    //////////////////
    /// enums.d.ts ///
    export declare enum SomeEnum {
        VALUE_RETAINED = 0
    }
    /**
     * @deprecated stripped
     */
    export declare enum DeprecatedEnum {
        /**
         * @deprecated
         */
        VALUE_ONE = 0,
        /**
         * @deprecated
         */
        VALUE_TWO = 1
    }
    //////////////////


    //////////////////
    /// mixed.d.ts ///
    import { IRetainedInterface } from './retained';
    export declare abstract class Retained {
        /**
         * @deprecated stripped
         */
        readonly deprecated = 1337;
        readonly retained = \\"YEAH\\";
    }
    /**
     * @deprecated stripped
     */
    export declare class Deprecated extends Retained implements IRetainedInterface {
    }
    export declare class GrandChild extends Deprecated {
        retainedMethod(): void;
    }
    //////////////////
    "
  `);
    });
});
function declFilesSnapshot(result) {
    return Object.entries(result.files)
        .filter(([name]) => name.endsWith('.d.ts'))
        .map(([name, content]) => {
        const separator = '/'.repeat(name.length + 8);
        return `${separator}\n/// ${name} ///\n${content}${separator}\n`;
    })
        .join('\n\n');
}
const MULTI_FILE_EXAMPLE = {
    'index.ts': `
    export * from './deprecated';
    export * from './retained';
    export * from './enums';
    export { Deprecated, GrandChild, Retained } from './mixed';
  `,
    'deprecated.ts': `
    ${DEPRECATED}
    export interface IDeprecatedInterface {}
    ${DEPRECATED}
    export class DeprecatedClass {}
  `,
    'retained.ts': `
    export interface IRetainedInterface {}
    export class RetainedClass {}
  `,
    'enums.ts': `
    export enum SomeEnum {
      VALUE_RETAINED,
      ${DEPRECATED}
      VALUE_DEPRECATED,
    }
    ${DEPRECATED}
    export enum DeprecatedEnum { VALUE_ONE, VALUE_TWO }
  `,
    'mixed.ts': `
    import { IRetainedInterface } from './retained';

    export abstract class Retained {
      ${DEPRECATED}
      readonly deprecated = 1337;
      readonly retained = 'YEAH';
    }
    ${DEPRECATED}
    export class Deprecated extends Retained implements IRetainedInterface {}
    export class GrandChild extends Deprecated {
      public retainedMethod(): void {}
      ${DEPRECATED}
      public deprecatedMethod(): void {}
    }
  `,
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVwcmVjYXRlZC1yZW1vdmVyLnRlc3QuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJkZXByZWNhdGVkLXJlbW92ZXIudGVzdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLCtCQUErQjtBQUMvQix5QkFBeUI7QUFDekIsNkJBQTZCO0FBRTdCLGdDQUFxRTtBQUVyRSxNQUFNLFVBQVUsR0FBRyw2QkFBNkIsQ0FBQztBQUVqRCxJQUFJLENBQUMseUJBQXlCLEVBQUUsS0FBSyxJQUFJLEVBQUU7SUFDekMsTUFBTSxNQUFNLEdBQUcsTUFBTSx3QkFBa0IsQ0FDckMsa0JBQWtCLEVBQ2xCLFNBQVMsQ0FBQyxjQUFjLEVBQ3hCLEVBQUUsZUFBZSxFQUFFLElBQUksRUFBRSxDQUMxQixDQUFDO0lBQ0YsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMscUJBQXFCLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQTZGbkQsQ0FBQyxDQUFDO0lBQ0gsTUFBTSxDQUFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMscUJBQXFCLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0dBNEN2RCxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQztBQUVILElBQUksQ0FBQyxnQ0FBZ0MsRUFBRSxLQUFLLElBQUksRUFBRTtJQUNoRCxNQUFNLE1BQU0sR0FBRyxNQUFNLHdCQUFrQixDQUNyQztRQUNFLFVBQVUsRUFBRTs7OztPQUlYO1FBQ0QsZUFBZSxFQUFFO1VBQ2IsVUFBVTs7T0FFYjtLQUNGLEVBQ0QsU0FBUyxDQUFDLGNBQWMsRUFDeEIsRUFBRSxlQUFlLEVBQUUsSUFBSSxFQUFFLENBQzFCLENBQUM7SUFFRixNQUFNLENBQUMsaUJBQWlC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LE1BQU0sQ0FBQyxLQUFLLENBQUM7U0FDaEMsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUMxQyxHQUFHLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsRUFBRSxFQUFFO1FBQ3ZCLE1BQU0sU0FBUyxHQUFHLEdBQUcsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztRQUM5QyxPQUFPLEdBQUcsU0FBUyxTQUFTLElBQUksU0FBUyxPQUFPLEdBQUcsU0FBUyxJQUFJLENBQUM7SUFDbkUsQ0FBQyxDQUFDO1NBQ0QsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ2xCLENBQUM7QUFFRCxNQUFNLGtCQUFrQixHQUFHO0lBQ3pCLFVBQVUsRUFBRTs7Ozs7R0FLWDtJQUNELGVBQWUsRUFBRTtNQUNiLFVBQVU7O01BRVYsVUFBVTs7R0FFYjtJQUNELGFBQWEsRUFBRTs7O0dBR2Q7SUFDRCxVQUFVLEVBQUU7OztRQUdOLFVBQVU7OztNQUdaLFVBQVU7O0dBRWI7SUFDRCxVQUFVLEVBQUU7Ozs7UUFJTixVQUFVOzs7O01BSVosVUFBVTs7OztRQUlSLFVBQVU7OztHQUdmO0NBQ0YsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzLWV4dHJhJztcbmltcG9ydCAqIGFzIG9zIGZyb20gJ29zJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5cbmltcG9ydCB7IGNvbXBpbGVKc2lpRm9yVGVzdCwgSGVscGVyQ29tcGlsYXRpb25SZXN1bHQgfSBmcm9tICcuLi9saWInO1xuXG5jb25zdCBERVBSRUNBVEVEID0gJy8qKiBAZGVwcmVjYXRlZCBzdHJpcHBlZCAqLyc7XG5cbnRlc3QoJ3Byb2R1Y2VzIGNvcnJlY3Qgb3V0cHV0JywgYXN5bmMgKCkgPT4ge1xuICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb21waWxlSnNpaUZvclRlc3QoXG4gICAgTVVMVElfRklMRV9FWEFNUExFLFxuICAgIHVuZGVmaW5lZCAvKiBjYWxsYmFjayAqLyxcbiAgICB7IHN0cmlwRGVwcmVjYXRlZDogdHJ1ZSB9LFxuICApO1xuICBleHBlY3QocmVzdWx0LmFzc2VtYmx5LnR5cGVzKS50b01hdGNoSW5saW5lU25hcHNob3QoYFxuICAgIE9iamVjdCB7XG4gICAgICBcInRlc3Rwa2cuR3JhbmRDaGlsZFwiOiBPYmplY3Qge1xuICAgICAgICBcImFzc2VtYmx5XCI6IFwidGVzdHBrZ1wiLFxuICAgICAgICBcImJhc2VcIjogXCJ0ZXN0cGtnLlJldGFpbmVkXCIsXG4gICAgICAgIFwiZnFuXCI6IFwidGVzdHBrZy5HcmFuZENoaWxkXCIsXG4gICAgICAgIFwiaW5pdGlhbGl6ZXJcIjogT2JqZWN0IHt9LFxuICAgICAgICBcImludGVyZmFjZXNcIjogQXJyYXkgW1xuICAgICAgICAgIFwidGVzdHBrZy5JUmV0YWluZWRJbnRlcmZhY2VcIixcbiAgICAgICAgXSxcbiAgICAgICAgXCJraW5kXCI6IFwiY2xhc3NcIixcbiAgICAgICAgXCJsb2NhdGlvbkluTW9kdWxlXCI6IE9iamVjdCB7XG4gICAgICAgICAgXCJmaWxlbmFtZVwiOiBcIm1peGVkLnRzXCIsXG4gICAgICAgICAgXCJsaW5lXCI6IDExLFxuICAgICAgICB9LFxuICAgICAgICBcIm1ldGhvZHNcIjogQXJyYXkgW1xuICAgICAgICAgIE9iamVjdCB7XG4gICAgICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgXCJmaWxlbmFtZVwiOiBcIm1peGVkLnRzXCIsXG4gICAgICAgICAgICAgIFwibGluZVwiOiAxMixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJyZXRhaW5lZE1ldGhvZFwiLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIFwibmFtZVwiOiBcIkdyYW5kQ2hpbGRcIixcbiAgICAgICAgXCJzeW1ib2xJZFwiOiBcIm1peGVkOkdyYW5kQ2hpbGRcIixcbiAgICAgIH0sXG4gICAgICBcInRlc3Rwa2cuSVJldGFpbmVkSW50ZXJmYWNlXCI6IE9iamVjdCB7XG4gICAgICAgIFwiYXNzZW1ibHlcIjogXCJ0ZXN0cGtnXCIsXG4gICAgICAgIFwiZnFuXCI6IFwidGVzdHBrZy5JUmV0YWluZWRJbnRlcmZhY2VcIixcbiAgICAgICAgXCJraW5kXCI6IFwiaW50ZXJmYWNlXCIsXG4gICAgICAgIFwibG9jYXRpb25Jbk1vZHVsZVwiOiBPYmplY3Qge1xuICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJyZXRhaW5lZC50c1wiLFxuICAgICAgICAgIFwibGluZVwiOiAyLFxuICAgICAgICB9LFxuICAgICAgICBcIm5hbWVcIjogXCJJUmV0YWluZWRJbnRlcmZhY2VcIixcbiAgICAgICAgXCJzeW1ib2xJZFwiOiBcInJldGFpbmVkOklSZXRhaW5lZEludGVyZmFjZVwiLFxuICAgICAgfSxcbiAgICAgIFwidGVzdHBrZy5SZXRhaW5lZFwiOiBPYmplY3Qge1xuICAgICAgICBcImFic3RyYWN0XCI6IHRydWUsXG4gICAgICAgIFwiYXNzZW1ibHlcIjogXCJ0ZXN0cGtnXCIsXG4gICAgICAgIFwiZnFuXCI6IFwidGVzdHBrZy5SZXRhaW5lZFwiLFxuICAgICAgICBcImluaXRpYWxpemVyXCI6IE9iamVjdCB7fSxcbiAgICAgICAgXCJraW5kXCI6IFwiY2xhc3NcIixcbiAgICAgICAgXCJsb2NhdGlvbkluTW9kdWxlXCI6IE9iamVjdCB7XG4gICAgICAgICAgXCJmaWxlbmFtZVwiOiBcIm1peGVkLnRzXCIsXG4gICAgICAgICAgXCJsaW5lXCI6IDQsXG4gICAgICAgIH0sXG4gICAgICAgIFwibmFtZVwiOiBcIlJldGFpbmVkXCIsXG4gICAgICAgIFwicHJvcGVydGllc1wiOiBBcnJheSBbXG4gICAgICAgICAgT2JqZWN0IHtcbiAgICAgICAgICAgIFwiaW1tdXRhYmxlXCI6IHRydWUsXG4gICAgICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgXCJmaWxlbmFtZVwiOiBcIm1peGVkLnRzXCIsXG4gICAgICAgICAgICAgIFwibGluZVwiOiA3LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwibmFtZVwiOiBcInJldGFpbmVkXCIsXG4gICAgICAgICAgICBcInR5cGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgXCJwcmltaXRpdmVcIjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgXCJzeW1ib2xJZFwiOiBcIm1peGVkOlJldGFpbmVkXCIsXG4gICAgICB9LFxuICAgICAgXCJ0ZXN0cGtnLlJldGFpbmVkQ2xhc3NcIjogT2JqZWN0IHtcbiAgICAgICAgXCJhc3NlbWJseVwiOiBcInRlc3Rwa2dcIixcbiAgICAgICAgXCJmcW5cIjogXCJ0ZXN0cGtnLlJldGFpbmVkQ2xhc3NcIixcbiAgICAgICAgXCJpbml0aWFsaXplclwiOiBPYmplY3Qge30sXG4gICAgICAgIFwia2luZFwiOiBcImNsYXNzXCIsXG4gICAgICAgIFwibG9jYXRpb25Jbk1vZHVsZVwiOiBPYmplY3Qge1xuICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJyZXRhaW5lZC50c1wiLFxuICAgICAgICAgIFwibGluZVwiOiAzLFxuICAgICAgICB9LFxuICAgICAgICBcIm5hbWVcIjogXCJSZXRhaW5lZENsYXNzXCIsXG4gICAgICAgIFwic3ltYm9sSWRcIjogXCJyZXRhaW5lZDpSZXRhaW5lZENsYXNzXCIsXG4gICAgICB9LFxuICAgICAgXCJ0ZXN0cGtnLlNvbWVFbnVtXCI6IE9iamVjdCB7XG4gICAgICAgIFwiYXNzZW1ibHlcIjogXCJ0ZXN0cGtnXCIsXG4gICAgICAgIFwiZnFuXCI6IFwidGVzdHBrZy5Tb21lRW51bVwiLFxuICAgICAgICBcImtpbmRcIjogXCJlbnVtXCIsXG4gICAgICAgIFwibG9jYXRpb25Jbk1vZHVsZVwiOiBPYmplY3Qge1xuICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJlbnVtcy50c1wiLFxuICAgICAgICAgIFwibGluZVwiOiAyLFxuICAgICAgICB9LFxuICAgICAgICBcIm1lbWJlcnNcIjogQXJyYXkgW1xuICAgICAgICAgIE9iamVjdCB7XG4gICAgICAgICAgICBcIm5hbWVcIjogXCJWQUxVRV9SRVRBSU5FRFwiLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIFwibmFtZVwiOiBcIlNvbWVFbnVtXCIsXG4gICAgICAgIFwic3ltYm9sSWRcIjogXCJlbnVtczpTb21lRW51bVwiLFxuICAgICAgfSxcbiAgICB9XG4gIGApO1xuICBleHBlY3QoZGVjbEZpbGVzU25hcHNob3QocmVzdWx0KSkudG9NYXRjaElubGluZVNuYXBzaG90KGBcbiAgICBcIi8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vLyBpbmRleC5kLnRzIC8vL1xuICAgIGltcG9ydCAnLi9kZXByZWNhdGVkJztcbiAgICBleHBvcnQgKiBmcm9tICcuL3JldGFpbmVkJztcbiAgICBleHBvcnQgKiBmcm9tICcuL2VudW1zJztcbiAgICBleHBvcnQgeyBHcmFuZENoaWxkLCBSZXRhaW5lZCB9IGZyb20gJy4vbWl4ZWQnO1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vL1xuXG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vLyBkZXByZWNhdGVkLmQudHMgLy8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8vIHJldGFpbmVkLmQudHMgLy8vXG4gICAgZXhwb3J0IGludGVyZmFjZSBJUmV0YWluZWRJbnRlcmZhY2Uge1xuICAgIH1cbiAgICBleHBvcnQgZGVjbGFyZSBjbGFzcyBSZXRhaW5lZENsYXNzIHtcbiAgICB9XG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vLyBlbnVtcy5kLnRzIC8vL1xuICAgIGV4cG9ydCBkZWNsYXJlIGVudW0gU29tZUVudW0ge1xuICAgICAgICBWQUxVRV9SRVRBSU5FRCA9IDBcbiAgICB9XG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vXG5cblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vLyBtaXhlZC5kLnRzIC8vL1xuICAgIGltcG9ydCAqIGFzIHJldGFpbmVkXzEgZnJvbSBcXFxcXCIuL3JldGFpbmVkXFxcXFwiO1xuICAgIGltcG9ydCB7IElSZXRhaW5lZEludGVyZmFjZSB9IGZyb20gJy4vcmV0YWluZWQnO1xuICAgIGV4cG9ydCBkZWNsYXJlIGFic3RyYWN0IGNsYXNzIFJldGFpbmVkIHtcbiAgICAgICAgcmVhZG9ubHkgcmV0YWluZWQgPSBcXFxcXCJZRUFIXFxcXFwiO1xuICAgIH1cbiAgICBleHBvcnQgZGVjbGFyZSBjbGFzcyBHcmFuZENoaWxkIGV4dGVuZHMgUmV0YWluZWQgaW1wbGVtZW50cyByZXRhaW5lZF8xLklSZXRhaW5lZEludGVyZmFjZSB7XG4gICAgICAgIHJldGFpbmVkTWV0aG9kKCk6IHZvaWQ7XG4gICAgfVxuICAgIC8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIFwiXG4gIGApO1xufSk7XG5cbnRlc3QoJ2Nyb3NzLWZpbGUgZGVwcmVjYXRlZCBoZXJpdGFnZScsIGFzeW5jICgpID0+IHtcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29tcGlsZUpzaWlGb3JUZXN0KFxuICAgIHtcbiAgICAgICdpbmRleC50cyc6IGBcbiAgICAgICAgaW1wb3J0IHsgSURlcHJlY2F0ZWQgfSBmcm9tICcuL2RlcHJlY2F0ZWQnO1xuICAgICAgICBleHBvcnQgKiBmcm9tICcuL2RlcHJlY2F0ZWQnO1xuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIElOb3REZXByZWNhdGVkIGV4dGVuZHMgSURlcHJlY2F0ZWQge31cbiAgICAgIGAsXG4gICAgICAnZGVwcmVjYXRlZC50cyc6IGBcbiAgICAgICAgJHtERVBSRUNBVEVEfVxuICAgICAgICBleHBvcnQgaW50ZXJmYWNlIElEZXByZWNhdGVkIHt9XG4gICAgICBgLFxuICAgIH0sXG4gICAgdW5kZWZpbmVkIC8qIGNhbGxiYWNrICovLFxuICAgIHsgc3RyaXBEZXByZWNhdGVkOiB0cnVlIH0sXG4gICk7XG5cbiAgZXhwZWN0KGRlY2xGaWxlc1NuYXBzaG90KHJlc3VsdCkpLnRvTWF0Y2hJbmxpbmVTbmFwc2hvdChgXG4gICAgXCIvLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLy8gaW5kZXguZC50cyAvLy9cbiAgICBpbXBvcnQgJy4vZGVwcmVjYXRlZCc7XG4gICAgaW1wb3J0ICcuL2RlcHJlY2F0ZWQnO1xuICAgIGV4cG9ydCBpbnRlcmZhY2UgSU5vdERlcHJlY2F0ZWQge1xuICAgIH1cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy9cblxuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLy8gZGVwcmVjYXRlZC5kLnRzIC8vL1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgXCJcbiAgYCk7XG59KTtcblxuZGVzY3JpYmUoJ3N0cmlwRGVwcmVjYXRlZEFsbG93TGlzdCcsICgpID0+IHtcbiAgdGVzdCgnc3RyaXBzIGFsbCBpZiBhbGwgRlFOcyBhcmUgcHJlc2VudCBpbiB0aGUgYWxsb3dMaXN0JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHRtcERpciA9IGF3YWl0IGZzLm1rZHRlbXAoXG4gICAgICBwYXRoLmpvaW4ob3MudG1wZGlyKCksICdqc2lpZGVwcmVjYXRlZHJlbW92ZXInKSxcbiAgICApO1xuICAgIGNvbnN0IHN0cmlwRGVwcmVjYXRlZEFsbG93TGlzdEZpbGUgPSBwYXRoLmpvaW4odG1wRGlyLCAnYWxsb3dMaXN0Jyk7XG4gICAgYXdhaXQgZnMud3JpdGVGaWxlKFxuICAgICAgc3RyaXBEZXByZWNhdGVkQWxsb3dMaXN0RmlsZSxcbiAgICAgIFtcbiAgICAgICAgJ3Rlc3Rwa2cuSURlcHJlY2F0ZWRJbnRlcmZhY2UnLFxuICAgICAgICAndGVzdHBrZy5EZXByZWNhdGVkQ2xhc3MnLFxuICAgICAgICAndGVzdHBrZy5Tb21lRW51bSNWQUxVRV9ERVBSRUNBVEVEJyxcbiAgICAgICAgJ3Rlc3Rwa2cuRGVwcmVjYXRlZEVudW0nLFxuICAgICAgICAndGVzdHBrZy5SZXRhaW5lZCNkZXByZWNhdGVkJyxcbiAgICAgICAgJ3Rlc3Rwa2cuRGVwcmVjYXRlZCcsXG4gICAgICAgICd0ZXN0cGtnLkdyYW5kQ2hpbGQjZGVwcmVjYXRlZE1ldGhvZCcsXG4gICAgICBdLmpvaW4oJ1xcbicpLFxuICAgICAgJ3V0ZjgnLFxuICAgICk7XG5cbiAgICBjb25zdCByZXN1bHRXaXRob3V0QWxsb3dMaXN0ID0gYXdhaXQgY29tcGlsZUpzaWlGb3JUZXN0KFxuICAgICAgTVVMVElfRklMRV9FWEFNUExFLFxuICAgICAgdW5kZWZpbmVkIC8qIGNhbGxiYWNrICovLFxuICAgICAgeyBzdHJpcERlcHJlY2F0ZWQ6IHRydWUgfSxcbiAgICApO1xuICAgIGNvbnN0IHJlc3VsdFdpdGhBbGxvd0xpc3QgPSBhd2FpdCBjb21waWxlSnNpaUZvclRlc3QoXG4gICAgICBNVUxUSV9GSUxFX0VYQU1QTEUsXG4gICAgICB1bmRlZmluZWQgLyogY2FsbGJhY2sgKi8sXG4gICAgICB7IHN0cmlwRGVwcmVjYXRlZDogdHJ1ZSwgc3RyaXBEZXByZWNhdGVkQWxsb3dMaXN0RmlsZSB9LFxuICAgICk7XG5cbiAgICBleHBlY3QocmVzdWx0V2l0aEFsbG93TGlzdC5hc3NlbWJseS50eXBlcykudG9FcXVhbChcbiAgICAgIHJlc3VsdFdpdGhvdXRBbGxvd0xpc3QuYXNzZW1ibHkudHlwZXMsXG4gICAgKTtcbiAgICBleHBlY3QoZGVjbEZpbGVzU25hcHNob3QocmVzdWx0V2l0aEFsbG93TGlzdCkpLnRvRXF1YWwoXG4gICAgICBkZWNsRmlsZXNTbmFwc2hvdChyZXN1bHRXaXRob3V0QWxsb3dMaXN0KSxcbiAgICApO1xuICB9KTtcblxuICB0ZXN0KCdzdHJpcHMgbm9uZSBpZiB0aGUgYWxsb3dMaXN0IGlzIGVtcHR5JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHRtcERpciA9IGF3YWl0IGZzLm1rZHRlbXAoXG4gICAgICBwYXRoLmpvaW4ob3MudG1wZGlyKCksICdqc2lpZGVwcmVjYXRlZHJlbW92ZXInKSxcbiAgICApO1xuICAgIGNvbnN0IHN0cmlwRGVwcmVjYXRlZEFsbG93TGlzdEZpbGUgPSBwYXRoLmpvaW4odG1wRGlyLCAnYWxsb3dMaXN0Jyk7XG4gICAgLy8gVmFsaWQgYnV0IGVtcHR5IGZpbGVcbiAgICBhd2FpdCBmcy53cml0ZUZpbGUoc3RyaXBEZXByZWNhdGVkQWxsb3dMaXN0RmlsZSwgJycsICd1dGY4Jyk7XG5cbiAgICBjb25zdCByZXN1bHROb1N0cmlwID0gYXdhaXQgY29tcGlsZUpzaWlGb3JUZXN0KFxuICAgICAgTVVMVElfRklMRV9FWEFNUExFLFxuICAgICAgdW5kZWZpbmVkIC8qIGNhbGxiYWNrICovLFxuICAgICAgeyBzdHJpcERlcHJlY2F0ZWQ6IGZhbHNlIH0sXG4gICAgKTtcbiAgICBjb25zdCByZXN1bHRTdHJpcEVtcHR5ID0gYXdhaXQgY29tcGlsZUpzaWlGb3JUZXN0KFxuICAgICAgTVVMVElfRklMRV9FWEFNUExFLFxuICAgICAgdW5kZWZpbmVkIC8qIGNhbGxiYWNrICovLFxuICAgICAgeyBzdHJpcERlcHJlY2F0ZWQ6IHRydWUsIHN0cmlwRGVwcmVjYXRlZEFsbG93TGlzdEZpbGUgfSxcbiAgICApO1xuXG4gICAgZXhwZWN0KHJlc3VsdFN0cmlwRW1wdHkuYXNzZW1ibHkudHlwZXMpLnRvRXF1YWwoXG4gICAgICByZXN1bHROb1N0cmlwLmFzc2VtYmx5LnR5cGVzLFxuICAgICk7XG4gICAgZXhwZWN0KGRlY2xGaWxlc1NuYXBzaG90KHJlc3VsdFN0cmlwRW1wdHkpKS50b0VxdWFsKFxuICAgICAgZGVjbEZpbGVzU25hcHNob3QocmVzdWx0Tm9TdHJpcCksXG4gICAgKTtcbiAgfSk7XG5cbiAgdGVzdCgnc3RyaXBzIG9ubHkgYWxsb3dsaXN0ZWQgaXRlbXMgaWYgc3Vic2V0IGlzIHByZXNlbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgdG1wRGlyID0gYXdhaXQgZnMubWtkdGVtcChcbiAgICAgIHBhdGguam9pbihvcy50bXBkaXIoKSwgJ2pzaWlkZXByZWNhdGVkcmVtb3ZlcicpLFxuICAgICk7XG4gICAgY29uc3Qgc3RyaXBEZXByZWNhdGVkQWxsb3dMaXN0RmlsZSA9IHBhdGguam9pbih0bXBEaXIsICdhbGxvd0xpc3QnKTtcbiAgICBhd2FpdCBmcy53cml0ZUZpbGUoXG4gICAgICBzdHJpcERlcHJlY2F0ZWRBbGxvd0xpc3RGaWxlLFxuICAgICAgW1xuICAgICAgICAndGVzdHBrZy5JRGVwcmVjYXRlZEludGVyZmFjZScsXG4gICAgICAgICd0ZXN0cGtnLlNvbWVFbnVtI1ZBTFVFX0RFUFJFQ0FURUQnLFxuICAgICAgICAndGVzdHBrZy5HcmFuZENoaWxkI2RlcHJlY2F0ZWRNZXRob2QnLFxuICAgICAgXS5qb2luKCdcXG4nKSxcbiAgICAgICd1dGY4JyxcbiAgICApO1xuXG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgY29tcGlsZUpzaWlGb3JUZXN0KFxuICAgICAgTVVMVElfRklMRV9FWEFNUExFLFxuICAgICAgdW5kZWZpbmVkIC8qIGNhbGxiYWNrICovLFxuICAgICAgeyBzdHJpcERlcHJlY2F0ZWQ6IHRydWUsIHN0cmlwRGVwcmVjYXRlZEFsbG93TGlzdEZpbGUgfSxcbiAgICApO1xuXG4gICAgZXhwZWN0KHJlc3VsdC5hc3NlbWJseS50eXBlcykudG9NYXRjaElubGluZVNuYXBzaG90KGBcbiAgICBPYmplY3Qge1xuICAgICAgXCJ0ZXN0cGtnLkRlcHJlY2F0ZWRcIjogT2JqZWN0IHtcbiAgICAgICAgXCJhc3NlbWJseVwiOiBcInRlc3Rwa2dcIixcbiAgICAgICAgXCJiYXNlXCI6IFwidGVzdHBrZy5SZXRhaW5lZFwiLFxuICAgICAgICBcImRvY3NcIjogT2JqZWN0IHtcbiAgICAgICAgICBcImRlcHJlY2F0ZWRcIjogXCJzdHJpcHBlZFwiLFxuICAgICAgICAgIFwic3RhYmlsaXR5XCI6IFwiZGVwcmVjYXRlZFwiLFxuICAgICAgICB9LFxuICAgICAgICBcImZxblwiOiBcInRlc3Rwa2cuRGVwcmVjYXRlZFwiLFxuICAgICAgICBcImluaXRpYWxpemVyXCI6IE9iamVjdCB7fSxcbiAgICAgICAgXCJpbnRlcmZhY2VzXCI6IEFycmF5IFtcbiAgICAgICAgICBcInRlc3Rwa2cuSVJldGFpbmVkSW50ZXJmYWNlXCIsXG4gICAgICAgIF0sXG4gICAgICAgIFwia2luZFwiOiBcImNsYXNzXCIsXG4gICAgICAgIFwibG9jYXRpb25Jbk1vZHVsZVwiOiBPYmplY3Qge1xuICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJtaXhlZC50c1wiLFxuICAgICAgICAgIFwibGluZVwiOiAxMCxcbiAgICAgICAgfSxcbiAgICAgICAgXCJuYW1lXCI6IFwiRGVwcmVjYXRlZFwiLFxuICAgICAgICBcInN5bWJvbElkXCI6IFwibWl4ZWQ6RGVwcmVjYXRlZFwiLFxuICAgICAgfSxcbiAgICAgIFwidGVzdHBrZy5EZXByZWNhdGVkQ2xhc3NcIjogT2JqZWN0IHtcbiAgICAgICAgXCJhc3NlbWJseVwiOiBcInRlc3Rwa2dcIixcbiAgICAgICAgXCJkb2NzXCI6IE9iamVjdCB7XG4gICAgICAgICAgXCJkZXByZWNhdGVkXCI6IFwic3RyaXBwZWRcIixcbiAgICAgICAgICBcInN0YWJpbGl0eVwiOiBcImRlcHJlY2F0ZWRcIixcbiAgICAgICAgfSxcbiAgICAgICAgXCJmcW5cIjogXCJ0ZXN0cGtnLkRlcHJlY2F0ZWRDbGFzc1wiLFxuICAgICAgICBcImluaXRpYWxpemVyXCI6IE9iamVjdCB7fSxcbiAgICAgICAgXCJraW5kXCI6IFwiY2xhc3NcIixcbiAgICAgICAgXCJsb2NhdGlvbkluTW9kdWxlXCI6IE9iamVjdCB7XG4gICAgICAgICAgXCJmaWxlbmFtZVwiOiBcImRlcHJlY2F0ZWQudHNcIixcbiAgICAgICAgICBcImxpbmVcIjogNSxcbiAgICAgICAgfSxcbiAgICAgICAgXCJuYW1lXCI6IFwiRGVwcmVjYXRlZENsYXNzXCIsXG4gICAgICAgIFwic3ltYm9sSWRcIjogXCJkZXByZWNhdGVkOkRlcHJlY2F0ZWRDbGFzc1wiLFxuICAgICAgfSxcbiAgICAgIFwidGVzdHBrZy5EZXByZWNhdGVkRW51bVwiOiBPYmplY3Qge1xuICAgICAgICBcImFzc2VtYmx5XCI6IFwidGVzdHBrZ1wiLFxuICAgICAgICBcImRvY3NcIjogT2JqZWN0IHtcbiAgICAgICAgICBcImRlcHJlY2F0ZWRcIjogXCJzdHJpcHBlZFwiLFxuICAgICAgICAgIFwic3RhYmlsaXR5XCI6IFwiZGVwcmVjYXRlZFwiLFxuICAgICAgICB9LFxuICAgICAgICBcImZxblwiOiBcInRlc3Rwa2cuRGVwcmVjYXRlZEVudW1cIixcbiAgICAgICAgXCJraW5kXCI6IFwiZW51bVwiLFxuICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICBcImZpbGVuYW1lXCI6IFwiZW51bXMudHNcIixcbiAgICAgICAgICBcImxpbmVcIjogOCxcbiAgICAgICAgfSxcbiAgICAgICAgXCJtZW1iZXJzXCI6IEFycmF5IFtcbiAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgXCJkb2NzXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgIFwic3RhYmlsaXR5XCI6IFwiZGVwcmVjYXRlZFwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwibmFtZVwiOiBcIlZBTFVFX09ORVwiLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgT2JqZWN0IHtcbiAgICAgICAgICAgIFwiZG9jc1wiOiBPYmplY3Qge1xuICAgICAgICAgICAgICBcInN0YWJpbGl0eVwiOiBcImRlcHJlY2F0ZWRcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIm5hbWVcIjogXCJWQUxVRV9UV09cIixcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBcIm5hbWVcIjogXCJEZXByZWNhdGVkRW51bVwiLFxuICAgICAgICBcInN5bWJvbElkXCI6IFwiZW51bXM6RGVwcmVjYXRlZEVudW1cIixcbiAgICAgIH0sXG4gICAgICBcInRlc3Rwa2cuR3JhbmRDaGlsZFwiOiBPYmplY3Qge1xuICAgICAgICBcImFzc2VtYmx5XCI6IFwidGVzdHBrZ1wiLFxuICAgICAgICBcImJhc2VcIjogXCJ0ZXN0cGtnLkRlcHJlY2F0ZWRcIixcbiAgICAgICAgXCJmcW5cIjogXCJ0ZXN0cGtnLkdyYW5kQ2hpbGRcIixcbiAgICAgICAgXCJpbml0aWFsaXplclwiOiBPYmplY3Qge30sXG4gICAgICAgIFwia2luZFwiOiBcImNsYXNzXCIsXG4gICAgICAgIFwibG9jYXRpb25Jbk1vZHVsZVwiOiBPYmplY3Qge1xuICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJtaXhlZC50c1wiLFxuICAgICAgICAgIFwibGluZVwiOiAxMSxcbiAgICAgICAgfSxcbiAgICAgICAgXCJtZXRob2RzXCI6IEFycmF5IFtcbiAgICAgICAgICBPYmplY3Qge1xuICAgICAgICAgICAgXCJsb2NhdGlvbkluTW9kdWxlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJtaXhlZC50c1wiLFxuICAgICAgICAgICAgICBcImxpbmVcIjogMTIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJuYW1lXCI6IFwicmV0YWluZWRNZXRob2RcIixcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBcIm5hbWVcIjogXCJHcmFuZENoaWxkXCIsXG4gICAgICAgIFwic3ltYm9sSWRcIjogXCJtaXhlZDpHcmFuZENoaWxkXCIsXG4gICAgICB9LFxuICAgICAgXCJ0ZXN0cGtnLklSZXRhaW5lZEludGVyZmFjZVwiOiBPYmplY3Qge1xuICAgICAgICBcImFzc2VtYmx5XCI6IFwidGVzdHBrZ1wiLFxuICAgICAgICBcImZxblwiOiBcInRlc3Rwa2cuSVJldGFpbmVkSW50ZXJmYWNlXCIsXG4gICAgICAgIFwia2luZFwiOiBcImludGVyZmFjZVwiLFxuICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICBcImZpbGVuYW1lXCI6IFwicmV0YWluZWQudHNcIixcbiAgICAgICAgICBcImxpbmVcIjogMixcbiAgICAgICAgfSxcbiAgICAgICAgXCJuYW1lXCI6IFwiSVJldGFpbmVkSW50ZXJmYWNlXCIsXG4gICAgICAgIFwic3ltYm9sSWRcIjogXCJyZXRhaW5lZDpJUmV0YWluZWRJbnRlcmZhY2VcIixcbiAgICAgIH0sXG4gICAgICBcInRlc3Rwa2cuUmV0YWluZWRcIjogT2JqZWN0IHtcbiAgICAgICAgXCJhYnN0cmFjdFwiOiB0cnVlLFxuICAgICAgICBcImFzc2VtYmx5XCI6IFwidGVzdHBrZ1wiLFxuICAgICAgICBcImZxblwiOiBcInRlc3Rwa2cuUmV0YWluZWRcIixcbiAgICAgICAgXCJpbml0aWFsaXplclwiOiBPYmplY3Qge30sXG4gICAgICAgIFwia2luZFwiOiBcImNsYXNzXCIsXG4gICAgICAgIFwibG9jYXRpb25Jbk1vZHVsZVwiOiBPYmplY3Qge1xuICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJtaXhlZC50c1wiLFxuICAgICAgICAgIFwibGluZVwiOiA0LFxuICAgICAgICB9LFxuICAgICAgICBcIm5hbWVcIjogXCJSZXRhaW5lZFwiLFxuICAgICAgICBcInByb3BlcnRpZXNcIjogQXJyYXkgW1xuICAgICAgICAgIE9iamVjdCB7XG4gICAgICAgICAgICBcImRvY3NcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgXCJkZXByZWNhdGVkXCI6IFwic3RyaXBwZWRcIixcbiAgICAgICAgICAgICAgXCJzdGFiaWxpdHlcIjogXCJkZXByZWNhdGVkXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJpbW11dGFibGVcIjogdHJ1ZSxcbiAgICAgICAgICAgIFwibG9jYXRpb25Jbk1vZHVsZVwiOiBPYmplY3Qge1xuICAgICAgICAgICAgICBcImZpbGVuYW1lXCI6IFwibWl4ZWQudHNcIixcbiAgICAgICAgICAgICAgXCJsaW5lXCI6IDYsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJuYW1lXCI6IFwiZGVwcmVjYXRlZFwiLFxuICAgICAgICAgICAgXCJ0eXBlXCI6IE9iamVjdCB7XG4gICAgICAgICAgICAgIFwicHJpbWl0aXZlXCI6IFwibnVtYmVyXCIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgT2JqZWN0IHtcbiAgICAgICAgICAgIFwiaW1tdXRhYmxlXCI6IHRydWUsXG4gICAgICAgICAgICBcImxvY2F0aW9uSW5Nb2R1bGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgXCJmaWxlbmFtZVwiOiBcIm1peGVkLnRzXCIsXG4gICAgICAgICAgICAgIFwibGluZVwiOiA3LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwibmFtZVwiOiBcInJldGFpbmVkXCIsXG4gICAgICAgICAgICBcInR5cGVcIjogT2JqZWN0IHtcbiAgICAgICAgICAgICAgXCJwcmltaXRpdmVcIjogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgICAgXCJzeW1ib2xJZFwiOiBcIm1peGVkOlJldGFpbmVkXCIsXG4gICAgICB9LFxuICAgICAgXCJ0ZXN0cGtnLlJldGFpbmVkQ2xhc3NcIjogT2JqZWN0IHtcbiAgICAgICAgXCJhc3NlbWJseVwiOiBcInRlc3Rwa2dcIixcbiAgICAgICAgXCJmcW5cIjogXCJ0ZXN0cGtnLlJldGFpbmVkQ2xhc3NcIixcbiAgICAgICAgXCJpbml0aWFsaXplclwiOiBPYmplY3Qge30sXG4gICAgICAgIFwia2luZFwiOiBcImNsYXNzXCIsXG4gICAgICAgIFwibG9jYXRpb25Jbk1vZHVsZVwiOiBPYmplY3Qge1xuICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJyZXRhaW5lZC50c1wiLFxuICAgICAgICAgIFwibGluZVwiOiAzLFxuICAgICAgICB9LFxuICAgICAgICBcIm5hbWVcIjogXCJSZXRhaW5lZENsYXNzXCIsXG4gICAgICAgIFwic3ltYm9sSWRcIjogXCJyZXRhaW5lZDpSZXRhaW5lZENsYXNzXCIsXG4gICAgICB9LFxuICAgICAgXCJ0ZXN0cGtnLlNvbWVFbnVtXCI6IE9iamVjdCB7XG4gICAgICAgIFwiYXNzZW1ibHlcIjogXCJ0ZXN0cGtnXCIsXG4gICAgICAgIFwiZnFuXCI6IFwidGVzdHBrZy5Tb21lRW51bVwiLFxuICAgICAgICBcImtpbmRcIjogXCJlbnVtXCIsXG4gICAgICAgIFwibG9jYXRpb25Jbk1vZHVsZVwiOiBPYmplY3Qge1xuICAgICAgICAgIFwiZmlsZW5hbWVcIjogXCJlbnVtcy50c1wiLFxuICAgICAgICAgIFwibGluZVwiOiAyLFxuICAgICAgICB9LFxuICAgICAgICBcIm1lbWJlcnNcIjogQXJyYXkgW1xuICAgICAgICAgIE9iamVjdCB7XG4gICAgICAgICAgICBcIm5hbWVcIjogXCJWQUxVRV9SRVRBSU5FRFwiLFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICAgIFwibmFtZVwiOiBcIlNvbWVFbnVtXCIsXG4gICAgICAgIFwic3ltYm9sSWRcIjogXCJlbnVtczpTb21lRW51bVwiLFxuICAgICAgfSxcbiAgICB9XG4gIGApO1xuICAgIGV4cGVjdChkZWNsRmlsZXNTbmFwc2hvdChyZXN1bHQpKS50b01hdGNoSW5saW5lU25hcHNob3QoYFxuICAgIFwiLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8vIGluZGV4LmQudHMgLy8vXG4gICAgZXhwb3J0ICogZnJvbSAnLi9kZXByZWNhdGVkJztcbiAgICBleHBvcnQgKiBmcm9tICcuL3JldGFpbmVkJztcbiAgICBleHBvcnQgKiBmcm9tICcuL2VudW1zJztcbiAgICBleHBvcnQgeyBEZXByZWNhdGVkLCBHcmFuZENoaWxkLCBSZXRhaW5lZCB9IGZyb20gJy4vbWl4ZWQnO1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vL1xuXG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vLyBkZXByZWNhdGVkLmQudHMgLy8vXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgc3RyaXBwZWRcbiAgICAgKi9cbiAgICBleHBvcnQgZGVjbGFyZSBjbGFzcyBEZXByZWNhdGVkQ2xhc3Mge1xuICAgIH1cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLy8gcmV0YWluZWQuZC50cyAvLy9cbiAgICBleHBvcnQgaW50ZXJmYWNlIElSZXRhaW5lZEludGVyZmFjZSB7XG4gICAgfVxuICAgIGV4cG9ydCBkZWNsYXJlIGNsYXNzIFJldGFpbmVkQ2xhc3Mge1xuICAgIH1cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8vIGVudW1zLmQudHMgLy8vXG4gICAgZXhwb3J0IGRlY2xhcmUgZW51bSBTb21lRW51bSB7XG4gICAgICAgIFZBTFVFX1JFVEFJTkVEID0gMFxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBzdHJpcHBlZFxuICAgICAqL1xuICAgIGV4cG9ydCBkZWNsYXJlIGVudW0gRGVwcmVjYXRlZEVudW0ge1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlcHJlY2F0ZWRcbiAgICAgICAgICovXG4gICAgICAgIFZBTFVFX09ORSA9IDAsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAZGVwcmVjYXRlZFxuICAgICAgICAgKi9cbiAgICAgICAgVkFMVUVfVFdPID0gMVxuICAgIH1cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy9cblxuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8vIG1peGVkLmQudHMgLy8vXG4gICAgaW1wb3J0IHsgSVJldGFpbmVkSW50ZXJmYWNlIH0gZnJvbSAnLi9yZXRhaW5lZCc7XG4gICAgZXhwb3J0IGRlY2xhcmUgYWJzdHJhY3QgY2xhc3MgUmV0YWluZWQge1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRlcHJlY2F0ZWQgc3RyaXBwZWRcbiAgICAgICAgICovXG4gICAgICAgIHJlYWRvbmx5IGRlcHJlY2F0ZWQgPSAxMzM3O1xuICAgICAgICByZWFkb25seSByZXRhaW5lZCA9IFxcXFxcIllFQUhcXFxcXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIHN0cmlwcGVkXG4gICAgICovXG4gICAgZXhwb3J0IGRlY2xhcmUgY2xhc3MgRGVwcmVjYXRlZCBleHRlbmRzIFJldGFpbmVkIGltcGxlbWVudHMgSVJldGFpbmVkSW50ZXJmYWNlIHtcbiAgICB9XG4gICAgZXhwb3J0IGRlY2xhcmUgY2xhc3MgR3JhbmRDaGlsZCBleHRlbmRzIERlcHJlY2F0ZWQge1xuICAgICAgICByZXRhaW5lZE1ldGhvZCgpOiB2b2lkO1xuICAgIH1cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy9cbiAgICBcIlxuICBgKTtcbiAgfSk7XG59KTtcblxuZnVuY3Rpb24gZGVjbEZpbGVzU25hcHNob3QocmVzdWx0OiBIZWxwZXJDb21waWxhdGlvblJlc3VsdCkge1xuICByZXR1cm4gT2JqZWN0LmVudHJpZXMocmVzdWx0LmZpbGVzKVxuICAgIC5maWx0ZXIoKFtuYW1lXSkgPT4gbmFtZS5lbmRzV2l0aCgnLmQudHMnKSlcbiAgICAubWFwKChbbmFtZSwgY29udGVudF0pID0+IHtcbiAgICAgIGNvbnN0IHNlcGFyYXRvciA9ICcvJy5yZXBlYXQobmFtZS5sZW5ndGggKyA4KTtcbiAgICAgIHJldHVybiBgJHtzZXBhcmF0b3J9XFxuLy8vICR7bmFtZX0gLy8vXFxuJHtjb250ZW50fSR7c2VwYXJhdG9yfVxcbmA7XG4gICAgfSlcbiAgICAuam9pbignXFxuXFxuJyk7XG59XG5cbmNvbnN0IE1VTFRJX0ZJTEVfRVhBTVBMRSA9IHtcbiAgJ2luZGV4LnRzJzogYFxuICAgIGV4cG9ydCAqIGZyb20gJy4vZGVwcmVjYXRlZCc7XG4gICAgZXhwb3J0ICogZnJvbSAnLi9yZXRhaW5lZCc7XG4gICAgZXhwb3J0ICogZnJvbSAnLi9lbnVtcyc7XG4gICAgZXhwb3J0IHsgRGVwcmVjYXRlZCwgR3JhbmRDaGlsZCwgUmV0YWluZWQgfSBmcm9tICcuL21peGVkJztcbiAgYCxcbiAgJ2RlcHJlY2F0ZWQudHMnOiBgXG4gICAgJHtERVBSRUNBVEVEfVxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSURlcHJlY2F0ZWRJbnRlcmZhY2Uge31cbiAgICAke0RFUFJFQ0FURUR9XG4gICAgZXhwb3J0IGNsYXNzIERlcHJlY2F0ZWRDbGFzcyB7fVxuICBgLFxuICAncmV0YWluZWQudHMnOiBgXG4gICAgZXhwb3J0IGludGVyZmFjZSBJUmV0YWluZWRJbnRlcmZhY2Uge31cbiAgICBleHBvcnQgY2xhc3MgUmV0YWluZWRDbGFzcyB7fVxuICBgLFxuICAnZW51bXMudHMnOiBgXG4gICAgZXhwb3J0IGVudW0gU29tZUVudW0ge1xuICAgICAgVkFMVUVfUkVUQUlORUQsXG4gICAgICAke0RFUFJFQ0FURUR9XG4gICAgICBWQUxVRV9ERVBSRUNBVEVELFxuICAgIH1cbiAgICAke0RFUFJFQ0FURUR9XG4gICAgZXhwb3J0IGVudW0gRGVwcmVjYXRlZEVudW0geyBWQUxVRV9PTkUsIFZBTFVFX1RXTyB9XG4gIGAsXG4gICdtaXhlZC50cyc6IGBcbiAgICBpbXBvcnQgeyBJUmV0YWluZWRJbnRlcmZhY2UgfSBmcm9tICcuL3JldGFpbmVkJztcblxuICAgIGV4cG9ydCBhYnN0cmFjdCBjbGFzcyBSZXRhaW5lZCB7XG4gICAgICAke0RFUFJFQ0FURUR9XG4gICAgICByZWFkb25seSBkZXByZWNhdGVkID0gMTMzNztcbiAgICAgIHJlYWRvbmx5IHJldGFpbmVkID0gJ1lFQUgnO1xuICAgIH1cbiAgICAke0RFUFJFQ0FURUR9XG4gICAgZXhwb3J0IGNsYXNzIERlcHJlY2F0ZWQgZXh0ZW5kcyBSZXRhaW5lZCBpbXBsZW1lbnRzIElSZXRhaW5lZEludGVyZmFjZSB7fVxuICAgIGV4cG9ydCBjbGFzcyBHcmFuZENoaWxkIGV4dGVuZHMgRGVwcmVjYXRlZCB7XG4gICAgICBwdWJsaWMgcmV0YWluZWRNZXRob2QoKTogdm9pZCB7fVxuICAgICAgJHtERVBSRUNBVEVEfVxuICAgICAgcHVibGljIGRlcHJlY2F0ZWRNZXRob2QoKTogdm9pZCB7fVxuICAgIH1cbiAgYCxcbn07XG4iXX0=